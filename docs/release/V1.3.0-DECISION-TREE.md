# v1.3.0 Release - Decision Tree

**Purpose**: Quick reference for GO/NO-GO decisions during release
**Use**: Follow the flowchart at each decision point

---

## 🎯 START: Ready to Release?

```
┌─────────────────────────────────────┐
│   v1.3.0 Release Decision Tree      │
└─────────────────────────────────────┘
                 │
                 ▼
         ┌───────────────┐
         │ Have 1+ hour  │
         │  available?   │
         └───────┬───────┘
                 │
        ┌────────┴────────┐
        │                 │
       YES               NO
        │                 │
        ▼                 ▼
   [CONTINUE]      [SCHEDULE LATER]
```

---

## 📝 PHASE 1: Pre-Flight Checks

```
┌────────────────────────────────────┐
│ Git Remote Accessible?             │
│ Run: git ls-remote origin          │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[CONTINUE] [FIX CONNECTIVITY]
             └─> Retry when ready


┌────────────────────────────────────┐
│ npm test command works?            │
│ Run: npm test -- --version         │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[CONTINUE] [FIX npm/node]
             └─> npm install
             └─> Retry when ready


┌────────────────────────────────────┐
│ Working directory clean?           │
│ Run: git status                    │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[CONTINUE] [STASH or COMMIT]
             └─> git stash
             └─> Continue when clean
```

**Result**: All checks pass → **PROCEED TO PHASE 2**

---

## ✏️ PHASE 2: File Edits

```
┌────────────────────────────────────┐
│ Edit package.json                  │
│ Line 3: "1.2.0" → "1.3.0"         │
└────────┬───────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Verify: grep '"1.3.0"' package.json│
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   FOUND    NOT FOUND
    │         │
    ▼         ▼
[CONTINUE] [FIX EDIT]
             └─> Re-edit
             └─> Verify again


┌────────────────────────────────────┐
│ Edit README.md                     │
│ Replace: "18 skills" → "35 skills" │
│ Replace: "34 skills" → "35 skills" │
└────────┬───────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Verify: grep -c "35" README.md     │
│ Expected: 3+ occurrences           │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  COUNT ≥3   COUNT <3
    │         │
    ▼         ▼
[CONTINUE] [FIX EDIT]
             └─> Check all locations
             └─> Verify again
```

**Result**: Files updated correctly → **PROCEED TO PHASE 3**

---

## 🧪 PHASE 3: Validation Tests

```
┌────────────────────────────────────────────┐
│ Run Security Tests                         │
│ npm test -- tests/security/SecurityFixes   │
└────────┬───────────────────────────────────┘
         │
    ┌────┴─────┐
  26/26      FAILURES
   PASS      DETECTED
    │         │
    ▼         ▼
[CONTINUE] ⛔ STOP - DO NOT PROCEED
             │
             ├─> Investigate failures
             ├─> Check test output
             ├─> Review recent changes
             │
             └─> Decision Point:
                 │
                 ├─> Can fix quickly? → Fix & retry
                 └─> Complex issue? → Abort release


┌────────────────────────────────────────────┐
│ Check Build Status                         │
│ npm run build 2>&1 | grep -c "error TS"   │
└────────┬───────────────────────────────────┘
         │
    ┌────┴─────┐
  11 ERRORS   >11 ERRORS
  (baseline)  (increased)
    │         │
    ▼         ▼
[CONTINUE] ⛔ STOP - INVESTIGATE
             │
             ├─> Compare with baseline
             ├─> Identify new errors
             ├─> Check if version-related
             │
             └─> Decision Point:
                 │
                 ├─> Version edit caused? → Fix & retry
                 └─> Other cause? → Investigate


┌────────────────────────────────────────────┐
│ Verify Skill Count                         │
│ find .claude/skills -name "SKILL.md" | wc │
└────────┬───────────────────────────────────┘
         │
    ┌────┴─────┐
   59 SKILLS   ≠59 SKILLS
    │         │
    ▼         ▼
[CONTINUE] ⚠️ WARNING - VERIFY
             │
             ├─> Re-count manually
             ├─> Check for missing files
             │
             └─> Decision Point:
                 │
                 ├─> Count correct? → Continue
                 └─> Files missing? → Investigate
```

**Result**: All tests pass → **PROCEED TO PHASE 4**

---

## 🔀 PHASE 4: Git Operations

```
┌────────────────────────────────────┐
│ Stage Changes                      │
│ git add package.json README.md     │
└────────┬───────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Verify Staging                     │
│ git status                         │
│ Check: Only 2 files staged?        │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[CONTINUE] [REVIEW CHANGES]
             │
             ├─> Other files staged?
             ├─> git reset <file>
             └─> Verify again


┌────────────────────────────────────┐
│ Create Commit                      │
│ git commit -m "chore: Bump v1.3.0" │
└────────┬───────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Verify Commit                      │
│ git log -1 --stat                  │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  LOOKS      ISSUES
   GOOD      FOUND
    │         │
    ▼         ▼
[CONTINUE] [FIX COMMIT]
             │
             ├─> git commit --amend
             └─> Or: git reset --soft HEAD~1


┌────────────────────────────────────┐
│ Create Tag                         │
│ git tag -a v1.3.0 -m "..."        │
└────────┬───────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Verify Tag                         │
│ git show v1.3.0                    │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  LOOKS      ISSUES
   GOOD      FOUND
    │         │
    ▼         ▼
[CONTINUE] [FIX TAG]
             │
             ├─> git tag -d v1.3.0
             ├─> Recreate with correct msg
             └─> Verify again
```

**Result**: Commit and tag created → **PROCEED TO PHASE 5**

---

## 🚀 PHASE 5: Push to Remote

```
┌────────────────────────────────────┐
│ Final Pre-Push Check               │
│ Review:                            │
│ - Commit message correct?          │
│ - Tag message correct?             │
│ - Only 2 files changed?            │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[CONTINUE] [REVIEW & FIX]
             └─> Go back and fix issues


┌────────────────────────────────────┐
│ Push Branch                        │
│ git push origin testing-with-qe    │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  SUCCESS   FAILURE
    │         │
    ▼         ▼
[CONTINUE] ⚠️ TROUBLESHOOT
             │
             ├─> Network error?
             │   └─> Retry after connectivity restored
             │
             ├─> Permission error?
             │   └─> Check credentials
             │   └─> Contact admin if needed
             │
             └─> Other error?
                 └─> Review error message
                 └─> See troubleshooting guide


┌────────────────────────────────────┐
│ Push Tag                           │
│ git push origin v1.3.0             │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  SUCCESS   FAILURE
    │         │
    ▼         ▼
[COMPLETE] ⚠️ TROUBLESHOOT
             │
             ├─> Branch pushed but tag failed?
             │   └─> Retry tag push
             │   └─> git push origin v1.3.0
             │
             └─> Both failed?
                 └─> Use rollback procedure
                 └─> Investigate root cause
```

**Result**: Push successful → **RELEASE COMPLETE! 🎉**

---

## ✅ POST-RELEASE: Verification

```
┌────────────────────────────────────┐
│ Verify Remote Tag                 │
│ git ls-remote --tags origin        │
│ Check: v1.3.0 appears?             │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[SUCCESS]  [WAIT & RETRY]
             │
             ├─> Wait 1-2 minutes
             ├─> Check git ls-remote again
             │
             └─> Still not visible?
                 └─> Check network
                 └─> Try: git fetch --tags


┌────────────────────────────────────┐
│ Check GitHub                       │
│ Visit: github.com/.../releases     │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
  VISIBLE   NOT VISIBLE
    │         │
    ▼         ▼
[SUCCESS]  [WAIT & RETRY]
             │
             ├─> Refresh page
             ├─> Wait 2-5 minutes
             ├─> Check again
             │
             └─> Still not visible?
                 └─> Review push logs
                 └─> Contact GitHub support
```

---

## ⛔ EMERGENCY: Rollback Decision Tree

```
┌────────────────────────────────────┐
│ Critical Issue Discovered?         │
│ Examples:                          │
│ - Security tests failing           │
│ - Production breaking              │
│ - Data corruption                  │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[ROLLBACK] [CONTINUE]
    │        [MONITORING]
    │
    └─> Execute Rollback Procedure:


┌─────────────────────────────────────────────┐
│ ROLLBACK PROCEDURE                          │
├─────────────────────────────────────────────┤
│ 1. Delete remote tag:                       │
│    git push origin :refs/tags/v1.3.0        │
│                                             │
│ 2. Delete local tag:                        │
│    git tag -d v1.3.0                        │
│                                             │
│ 3. Revert commit:                           │
│    git reset --soft HEAD~1                  │
│    (or: git revert HEAD if pushed to main) │
│                                             │
│ 4. Push revert (if needed):                 │
│    git push origin testing-with-qe --force  │
│                                             │
│ 5. Verify rollback:                         │
│    - Check git log                          │
│    - Verify tag removed                     │
│    - Confirm files reverted                 │
└─────────────────────────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Investigate Root Cause             │
│ - Review error logs                │
│ - Check test output                │
│ - Analyze changes                  │
│ - Document findings                │
└────────────────────────────────────┘
         │
         ▼
┌────────────────────────────────────┐
│ Fix Issues & Retry?                │
└────────┬───────────────────────────┘
         │
    ┌────┴────┐
   YES       NO
    │         │
    ▼         ▼
[FIX &     [DEFER TO
 RETRY]     v1.3.1]
```

---

## 📊 Decision Matrix Quick Reference

### GO Criteria (ALL must be TRUE)
- ✅ Quality score ≥78/100
- ✅ Security tests: 26/26 passing
- ✅ Build errors: ≤11 (baseline)
- ✅ Skills count: 59
- ✅ Files staged: package.json + README.md only
- ✅ Network connectivity: OK
- ✅ Git permissions: OK

### STOP Criteria (ANY is TRUE)
- ❌ Security tests failing
- ❌ Build errors increased
- ❌ Network unavailable
- ❌ Git errors cannot be resolved
- ❌ Unexpected file changes
- ❌ Critical bugs discovered

### ROLLBACK Triggers (ANY is TRUE)
- 🚨 Security vulnerability introduced
- 🚨 Production system breaking
- 🚨 Data corruption detected
- 🚨 Critical user impact
- 🚨 Cannot fix quickly (<1 hour)

---

## 🎯 Quick Decision Points

**At Each Phase**:
1. Run the checks for that phase
2. Follow the decision tree
3. GO → Proceed to next phase
4. STOP → Fix issues, retry, or abort
5. ROLLBACK → Execute emergency procedure

**Time Estimates by Phase**:
- Phase 1 (Pre-flight): 5 min
- Phase 2 (Edits): 10 min
- Phase 3 (Validation): 15 min
- Phase 4 (Git ops): 10 min
- Phase 5 (Push): 5 min
- **Total**: ~45 min (with buffer: 60 min)

**Risk Levels**:
- 🟢 LOW: Proceed confidently
- 🟡 MEDIUM: Proceed with caution
- 🔴 HIGH: Stop and investigate
- 🚨 CRITICAL: Rollback immediately

---

**Document Version**: 1.0
**Last Updated**: 2025-10-24
**Use**: Follow this tree at each decision point during release

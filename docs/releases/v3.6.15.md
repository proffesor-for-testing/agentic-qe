# v3.6.15 Release Notes

**Release Date:** 2026-02-20

## Highlights

Fixes 11 bugs in test generation that caused `aqe test generate` to produce broken, non-runnable test code (#295). Also fixes cloud sync to properly connect to PostgreSQL instead of silently falling back to mock mode.

## Fixed

- **Test generation produces unusable stub code** (#295) — Complete overhaul of all 4 test generators (Jest, Vitest, Mocha, Pytest):
  - Python import regex no longer matches `{` from TypeScript destructured imports
  - Only exported functions/classes get test stubs (was generating tests for internal helpers)
  - Unknown types now produce safe inline values instead of undefined `mockXxx` variables
  - Void return types properly handled in Mocha and Pytest generators
  - Pattern matcher `generateMockValue()` returns safe values instead of bare variable references
  - Generated test files are now written to disk at the reported path
  - Undefined parameter tests use try-catch instead of blanket `toThrow()` assertions
- **Cloud sync falls back to mock mode** — `await import('pg')` fails inside esbuild bundles. Replaced with `createRequire()` which works correctly at runtime. Error handling now distinguishes "pg not installed" from "connection failed".
- **Cloud sync source paths resolve wrong** — JSON source paths used `../` prefix resolving to wrong directory. Fixed to use `./` relative to project root.

## Added

- Data protection rules in CLAUDE.md to prevent accidental database operations by AI agents

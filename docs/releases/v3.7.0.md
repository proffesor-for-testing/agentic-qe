# v3.7.0 Release Notes

**Release Date:** 2026-02-23

## Highlights

RVF (RuVector Format) Cognitive Container integration brings 7 new subsystems to AQE: MinCut-based task routing, copy-on-write dream cycle branching, cryptographic witness chain audit trail, unified HNSW search, portable brain export/import, MinCut test suite optimization, and RVF dual-write preparation. 12 of 16 planned integration tasks completed with 246 new tests.

## Added

- **MinCut-based task routing** — Models task complexity as a graph problem using vertex connectivity (lambda). High-connectivity tasks route to Sonnet/Opus; isolated tasks route to Booster. Runs in shadow mode alongside the production router for data-driven comparison.

- **RVCOW dream cycle branching** — Dream cycles now create isolated copy-on-write branches for speculative pattern associations. Successful insights merge into the main store; failed experiments discard cleanly with zero side effects. Uses SQLite savepoints with in-memory overlays.

- **Cryptographic witness chain** — Every quality gate decision, pattern promotion, test suite completion, and routing decision is recorded in a SHA-256 hash-chained append-only audit trail. Each entry links to its predecessor, making the chain tamper-evident and verifiable.

- **HNSW unification** — Three fragmented HNSW implementations (InMemoryHNSWIndex, RuvectorFlatIndex, QEGNNEmbeddingIndex) consolidated behind a unified progressive adapter. Small collections use fast flat scan; large collections use full HNSW graph. Single search interface for all callers.

- **Brain export/import CLI** — New `aqe brain export`, `aqe brain import --dry-run`, and `aqe brain info` commands. Export your QE intelligence (patterns, Q-values, dream insights, witness chain) as a portable `.aqe-brain` container. Import into another AQE instance with conflict detection.

- **MinCut test suite optimizer** — Given test coverage data, identifies the minimum set of critical tests for maximum coverage assurance, flags skippable redundant tests, and computes optimal execution order. Reduces test suite execution time while maintaining coverage guarantees.

- **RVF dual-writer** — QEReasoningBank now optionally dual-writes patterns to both SQLite and RVF containers. SQLite remains source of truth. This prepares for future RVF promotion as primary storage when native binaries ship.

- **RVF native adapter** — Direct N-API bindings to @ruvector/rvf-node with graceful fallback. Bypasses SDK wrapper issues for environments where native binaries are available.

- **Stoer-Wagner structural health** — Periodic exact mincut computation on swarm topology and codebase dependency graphs. Reports normalized connectivity scores (0-1) and alerts when topology becomes fragile.

- **246 new tests** across all integration modules

## Fixed

- **Dead module wiring** — Three modules (MinCut test optimizer, brain CLI, RVF dual-writer) were implemented and tested but not reachable from production code paths. All now properly wired.
- **Benchmark baseline integrity** — Pre-RVF baseline restored after accidental overwrite by post-integration rerun
- **Test honesty** — 21 mock-only dual-writer tests replaced with assertions that verify actual behavior
- **HNSW test stability** — Fixed non-deterministic vector ordering from cosine similarity scale-invariance

## Changed

- **Benchmark report transparency** — Honest status labels ("Wired"/"Internal" instead of "Live"), added "Not Yet Wired" section
- **QEReasoningBank** — New `setRvfDualWriter()` injection point for optional RVF dual-write
- **Test execution coordinator** — New `optimizeTestSuite()` method using MinCut analysis

## Integration Plan Progress

| Phase | Tasks | Completed | Status |
|-------|-------|-----------|--------|
| Phase 1: Shadow Mode | 7 | 6 | Done (1.4 partial — comparator exists, not wired to router) |
| Phase 2: Progressive | 5 | 5 | Done |
| Phase 3: Native RVF | 4 | 1 | 3.1 done; 3.2-3.4 gated on rvf-node binary availability |
| **Total** | **16** | **12** | **75% complete** |

## What's Next (Phase 3)

Phase 3 tasks (RVF read validation, SQLite-to-RVF promotion, brain marketplace) are gated on `@ruvector/rvf-node` publishing functional N-API binaries. Phases 1-2 deliver standalone value regardless of Phase 3 outcome. All features are feature-flagged with instant rollback.

# v3.6.7 Release Notes

**Release Date:** 2026-02-14

## Highlights

Eliminates recurring database corruption caused by concurrent VACUUM operations during hook execution, fixes split-brain dual-database issue, and removes 124MB of vector table bloat.

## Fixed

- **Database corruption from concurrent VACUUM** — Removed automated VACUUM that caused "database disk image is malformed" errors when multiple hook processes accessed SQLite simultaneously.
- **Dual-database split-brain** — `findProjectRoot()` now finds the topmost `.agentic-qe` directory, preventing shadow databases in subdirectories.
- **Vector table bloat (124MB)** — Stopped persisting HNSW vectors to SQLite `vectors` table (30K+ unnecessary rows). In-memory index is the source of truth.
- **Cross-domain transfer re-running every session** — Seed flag now persists before the transfer, surviving hook timeout interruptions.
- **Stop hook JSON validation error** — Simplified output format to comply with Claude Code hook schema.
- **Hypergraph database path** — Fixed relative path that created shadow `v3/.agentic-qe/` directory.

## Added

- File guardian, command bouncer, and context injection hooks for safer editing
- Tier 2/3 kv_store persistence for cross-session learning retention
- Coverage learner feedback loop and token usage tracker
- Q-learning router for reinforcement learning-based agent selection
- RuVector WASM integrations (AST complexity, coverage router, diff-risk, graph boundaries)

## Changed

- Knowledge graph operates in cache-only mode (no PostgreSQL dependency)
- Pattern store simplified with reduced persistence complexity

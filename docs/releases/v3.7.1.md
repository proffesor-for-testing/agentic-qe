# v3.7.1 Release Notes

**Release Date:** 2026-02-24

## Highlights

OpenCode integration brings AQE to a new agent client ecosystem, while RVF dual-writer activation completes the production wiring for native vector storage alongside SQLite.

## Added

- **OpenCode integration** — Full 5-workstream integration: SSE/WS/HTTP transport routing, output compaction middleware, 10 agent configs, 15 QE skills, 5 QCSD swarm skills, provider capability matrix, and graceful degradation
- **RVF production wiring** — All QEReasoningBank creation sites now inject the shared RvfDualWriter singleton for best-effort native vector replication
- **Shared RVF dual-writer singleton** — Lazy-initialized factory with `AQE_RVF_MODE=sqlite-only` operator override
- **17 RVF integration tests** — Mock-based degradation tests plus native-path tests with real RVF containers

## Fixed

- O(n^2) similarity edge explosion in dream engine spreading activation
- Non-semantic metrics JSON skipped from embedding pipeline
- Persistence reliability improvements in learning pipeline
- PostgreSQL test mocking and real integration test coverage
- Security hardening and god-file decomposition
- RVF shutdown ordering (cleanup after server drain, not before)
- RVF reset race condition (synchronous callback instead of fire-and-forget import)
- Brain CLI documentation examples

## Changed

- All `@ruvector/rvf-node` platform variants externalized in build scripts
- MCP base module exports `registerRvfResetFn()` for cross-module reset coordination

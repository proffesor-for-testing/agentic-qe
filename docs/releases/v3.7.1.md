# v3.7.1 Release Notes

**Release Date:** 2026-02-25

## Highlights

Full OpenCode integration makes AQE's complete toolkit — 60 agents and 78 QE skills — accessible from any OpenCode-compatible agent client. Instead of configuring agents and skills manually, run `aqe init --auto` and OpenCode clients automatically discover all AQE capabilities through standard YAML configs.

## What is OpenCode Integration?

[OpenCode](https://opencode.ai) is an open standard for AI agent clients. With this release, AQE generates standardized configuration files that any OpenCode-compatible client can consume:

- **Agent configs** (`.opencode/agents/*.yaml`) — Each of AQE's 59 agents gets a rich YAML profile including its identity, capabilities, memory integration instructions, learning protocol, and available MCP tools. OpenCode clients can browse and invoke any agent without custom setup.
- **Skill configs** (`.opencode/skills/*.yaml`) — All 86 skills (78 QE + 8 general dev) are exposed with step-by-step workflows, required tools, and domain tags. Clients can discover and execute skills by category.
- **Tool wrappers** (`.opencode/tools/*.yaml`) — 5 core MCP tool wrappers for fleet management, test generation, coverage analysis, quality assessment, and memory operations.
- **Transport routing** — SSE, WebSocket, and HTTP transports with automatic selection based on client capabilities.
- **Graceful degradation** — Skills are tagged with minimum model tiers (`tier1-any`, `tier2-good`, `tier3-best`). When running on less capable models, the system warns or suggests simpler alternatives.
- **Output compaction** — Large agent outputs are automatically compressed to fit within OpenCode's context window limits.

### Quick Start

```bash
# New project — auto-detects OpenCode and provisions everything
npx agentic-qe init --auto

# Existing project — add OpenCode assets
npx agentic-qe init --auto --with-opencode
```

This creates `.opencode/agents/`, `.opencode/skills/`, `.opencode/tools/`, and `opencode.json` in your project.

## Added

- **59 OpenCode agent configs** — Rich YAML profiles generated from the full agent definitions in `.claude/agents/v3/`. Each config includes identity/mission, core capabilities, operating principles, memory integration (namespaces and query/store instructions), learning protocol, output format, and coordination notes. Covers all QE domains: test generation, coverage analysis, security compliance, defect intelligence, chaos engineering, and more.

- **86 OpenCode skill configs** — All QE and general dev skills exposed as step-by-step workflows. Each config includes the skill description, domain tags, required MCP tools, and actionable steps extracted from the skill definitions.

- **5 MCP tool wrappers** — Fleet management, test generation, coverage analysis, quality assessment, and memory operations available as OpenCode tool definitions.

- **SSE/WebSocket/HTTP transport routing** — Automatic transport selection with fallback chain for maximum client compatibility.

- **Output compaction middleware** — Compresses large agent outputs to stay within context window limits while preserving essential information.

- **Provider capability matrix** — Documents which skills work with which model providers (Claude-only, Claude/GPT, any provider, local-safe).

- **Graceful degradation** — 3-tier model routing for skills ensures appropriate warnings when running on less capable models.

- **`aqe init --with-opencode` flag** — Provisions all OpenCode assets into user projects during initialization. Auto-detected in `--auto` mode when `opencode.json` exists.

- **RVF production wiring** — All QEReasoningBank creation sites now inject the shared RvfDualWriter singleton for best-effort native vector replication with `AQE_RVF_MODE=sqlite-only` operator override.

## Fixed

- YAML string escaper now properly escapes backslashes (CodeQL finding)
- O(n^2) similarity edge explosion in dream engine spreading activation
- Non-semantic metrics JSON skipped from embedding pipeline
- Persistence reliability improvements in learning pipeline
- RVF shutdown ordering and reset race condition
- Stale skill/agent counts corrected across all documentation (75 → 78 QE skills, consistent 60 agent count)

## Changed

- Agent generator (`generate-opencode-agents.ts`) rewritten to read from `.claude/agents/v3/*.md` with full XML section extraction
- Skills generator (`generate-opencode-skills.ts`) updated with CRLF normalization, collision-safe naming, and richer step extraction
- All `@ruvector/rvf-node` platform variants externalized in build scripts

## OpenCode Asset Counts

| Asset Type | Count | Source |
|-----------|-------|--------|
| Agent configs | 59 | `.claude/agents/v3/*.md` (53 QE + 6 cross-domain) |
| Skill configs | 86 | `.claude/skills/` (78 QE + 8 general dev) |
| Tool wrappers | 5 | Core MCP operations |
| Transport modes | 3 | SSE, WebSocket, HTTP |

**Note:** The project has 60 total agents (59 with standalone definitions + 7 TDD subagents that share parent configs, minus overlaps). OpenCode generates 59 individual agent configs from the standalone `.md` files.

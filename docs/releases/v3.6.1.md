# v3.6.1 Release Notes

**Release Date:** 2026-02-09

## Highlights

Agent Teams Integration (ADR-064) delivers a hybrid fleet architecture layering Claude Code Agent Teams communication on the Queen Coordinator.

## Added

- **Agent Teams Integration (ADR-064)** — Hybrid fleet architecture with direct mailbox messaging, domain-scoped teams, and tiered fleet activation (Lite/Standard/Full)
- **Distributed Tracing** — TraceContext propagation across agent messages via correlationId encoding. Queen traces task lifecycles end-to-end with span start/complete/fail
- **Competing Hypotheses** — Multi-agent root cause investigation with evidence scoring and convergence. Auto-triggered on critical (P0/P1) task failures
- **Dynamic Agent Scaling** — Workload-based auto-scaling integrated into Queen's metrics loop with configurable policies and cooldowns
- **Cross-Fleet Federation** — FederationMailbox for multi-service routing with health monitoring and service discovery
- **Domain Circuit Breakers** — Fault isolation per domain with configurable thresholds and automatic recovery
- **Task Dependency DAG** — Topological ordering with cycle detection for complex multi-step workflows
- **HNSW Graph Construction** — Real O(log n) HNSW insert/search replacing the O(n) stub in unified memory
- **Pattern Training Pipeline** — TaskCompleted hook automatically extracts and trains patterns into ReasoningBank
- **Devils Advocate Agent** — `qe-devils-advocate` for adversarial review of agent outputs

## Fixed

- 6 CodeQL alerts resolved in enterprise-integration services
- TraceContext now correctly propagated through adapter sendMessage/broadcast
- Dynamic scaler wired into Queen's metrics collection loop
- Competing hypotheses auto-triggered on permanent P0/P1 failures

## Changed

- Queen Coordinator now manages trace contexts for all task lifecycles
- Agent Teams adapter supports trace-aware messaging
- Fleet tier descriptions updated for Lite/Standard/Full activation levels

## Architecture

- **ADR-064**: Agent Teams Integration — 4-phase hybrid architecture
  - Phase 1: Foundation (AgentTeamsAdapter, FederationMailbox)
  - Phase 2: Hybrid Architecture (CircuitBreaker, TaskDAG, DynamicScaler)
  - Phase 3: Learning Pipeline (ReasoningBankPatternStore, promotePattern)
  - Phase 4: Observability (DistributedTracing, CompetingHypotheses)

## Test Coverage

- 282 coordination tests passing
- 397 total tests across 18 test files
- 8 new tracing benchmark tests (all <500ms, typically <10ms)

# v3.6.19 Release Notes

**Release Date:** 2026-02-22

## Highlights

Fixes 6 learning pipeline issues found via brutal honesty audit: event-driven trajectory lifecycle, object return type detection across all test generators, real learning metrics in fleet_status, and 25 new tests covering every fix.

## Fixed

- **Event-driven trajectory lifecycle** — Replaced fragile polling loop with CrossDomainEventRouter event subscriptions, eliminating race conditions and memory leaks
- **Object return type misclassified as primitive** — All 5 test generators now correctly detect `{ valid: boolean }` as object, not boolean (7 code locations)
- **memory_store persistence check** — Removed unnecessary duck-typing; HybridMemoryBackend always persists to SQLite
- **memory_usage reported zeros** — Now returns real vector and namespace counts from the backend
- **fleet_status missing learning metrics** — Added `learning` field with real SQLite counts (patterns, experiences, trajectories, vectors, dream cycles)
- **Auto-team-wiring crash** — Guarded against undefined DomainTeamManager during agent spawn in test environments

## Added

- **queryCount()** on UnifiedMemoryManager with SQL-injection-safe table allowlist
- **Trajectory event subscription** wired into fleet init/dispose lifecycle
- **Orphaned trajectory cleanup** at startup for stale trajectories (>1 hour)
- **ReasoningBank learning system guide** — New docs covering the 4-stage pipeline, pattern lifecycle, and embedding architecture
- **25 new unit tests** covering all 6 fixes

## Changed

- **Embedding dimension consolidation** — ReasoningBank/PatternStore standardized on 384-dim (all-MiniLM-L6-v2); coverage-analysis 768-dim indices unchanged

skill: shift-left-testing
version: 1.0.0
description: >
  Evaluation suite for shift-left testing strategy.
  Tests early defect detection, pre-commit checks, and development-phase validation.

models_to_test:
  - claude-3.5-sonnet
  - claude-3-haiku

mcp_integration:
  enabled: true
  namespace: skill-validation
  query_patterns: true
  track_outcomes: true
  store_patterns: true
  target_agents:
    - qe-learning-coordinator

learning:
  store_success_patterns: true
  pattern_ttl_days: 90

result_format:
  json_output: true
  include_timing: true
  include_token_usage: true

setup:
  required_tools:
    - jq

test_cases:

  - id: tc001_pre_commit_validation
    description: "Identify issues before commit"
    category: pre_commit
    priority: critical

    input:
      code_changes:
        - "function processPayment() { db.query(userInput); }"
      checks:
        - "sql_injection"
        - "xss"
        - "hardcoded_secrets"

    expected_output:
      must_contain:
        - "SQL injection"
        - "vulnerable"
        - "pre-commit"

    validation:
      schema_check: true
      keyword_match_threshold: 0.8

  - id: tc002_unit_test_generation_early
    description: "Generate unit tests during development"
    category: development
    priority: high

    input:
      code: |
        function calculateDiscount(amount, percentage) {
          return amount * (1 - percentage / 100);
        }
      generate_tests: true

    expected_output:
      must_contain:
        - "test"
        - "unit"
        - "edge case"

    validation:
      schema_check: true

  - id: tc003_code_quality_gates
    description: "Apply quality gates during development"
    category: quality
    priority: high

    input:
      metrics:
        complexity: 12
        duplication_percent: 5
        test_coverage: 75

    expected_output:
      must_contain:
        - "quality"
        - "gate"

    validation:
      schema_check: true

  - id: tc004_early_architecture_review
    description: "Validate architecture early in development"
    category: architecture
    priority: medium

    input:
      design:
        layers: ["presentation", "business", "data"]
        patterns: ["MVC", "dependency_injection"]

    expected_output:
      must_contain:
        - "architecture"
        - "design"

    validation:
      schema_check: true

  - id: tc005_developer_feedback
    description: "Provide immediate developer feedback"
    category: feedback
    priority: medium

    input:
      code_snippet: "const x = 1; const y = 1; const z = x + y;"
      focus_areas: ["readability", "performance"]

    expected_output:
      must_contain:
        - "feedback"
        - "improve"

    validation:
      schema_check: true
      allow_partial: true

success_criteria:
  pass_rate: 0.9
  critical_pass_rate: 1.0
  avg_reasoning_quality: 0.75
  max_execution_time_ms: 300000

metadata:
  author: "qe-shift-left-coordinator"
  created: "2026-02-02"
  coverage_target: >
    Shift-left testing with 5 test cases covering pre-commit validation,
    early test generation, quality gates, architecture review, and developer feedback.

{
  "reportMetadata": {
    "version": "3.0.0",
    "generatedAt": "2026-01-11T11:37:21.000Z",
    "analysisMethod": "O(log n) HNSW-indexed sublinear analysis",
    "hnswPerformance": {
      "indexOperations": 274,
      "searchLatencyMs": 0.17,
      "bruteForceEquivalentMs": 1000,
      "improvementFactor": "5900x at 100k files"
    },
    "codebaseStats": {
      "totalSourceFiles": 274,
      "totalTestFiles": 91,
      "overallTestFileRatio": "33.2%"
    }
  },
  "summary": {
    "overallCoverage": {
      "lineCoverage": 80.8,
      "branchCoverage": 84.0,
      "functionCoverage": 88.0,
      "statementCoverage": 76.6
    },
    "totalUntested": {
      "files": 84,
      "percentage": 30.7
    },
    "riskAssessment": "medium",
    "aiConfidence": 0.88,
    "trends": {
      "lineCoverageTrend": "stable",
      "branchCoverageTrend": "improving",
      "weeklyChange": 2.5
    }
  },
  "domainCoverage": {
    "test-execution": {
      "totalFiles": 5,
      "testedFiles": 1,
      "coverage": 20.0,
      "riskScore": 0.85,
      "priority": "critical",
      "untestedFiles": [
        "src/domains/test-execution/plugin.ts",
        "src/domains/test-execution/services/flaky-detector.ts",
        "src/domains/test-execution/services/retry-handler.ts",
        "src/domains/test-execution/services/test-executor.ts"
      ],
      "recommendations": [
        "CRITICAL: Core test execution services lack unit tests",
        "Add tests for flaky-detector.ts - handles test stability detection",
        "Add tests for retry-handler.ts - manages test retry logic",
        "Add tests for test-executor.ts - critical for parallel execution"
      ]
    },
    "test-generation": {
      "totalFiles": 4,
      "testedFiles": 1,
      "coverage": 25.0,
      "riskScore": 0.82,
      "priority": "critical",
      "untestedFiles": [
        "src/domains/test-generation/plugin.ts",
        "src/domains/test-generation/services/test-generator.ts",
        "src/domains/test-generation/services/pattern-matcher.ts"
      ],
      "recommendations": [
        "CRITICAL: AI test generation service has no unit tests",
        "Add tests for test-generator.ts - core AI-powered generation",
        "Add tests for pattern-matcher.ts - pattern recognition logic"
      ]
    },
    "coverage-analysis": {
      "totalFiles": 8,
      "testedFiles": 2,
      "coverage": 25.0,
      "riskScore": 0.78,
      "priority": "high",
      "untestedFiles": [
        "src/domains/coverage-analysis/plugin.ts",
        "src/domains/coverage-analysis/services/coverage-parser.ts",
        "src/domains/coverage-analysis/services/coverage-analyzer.ts",
        "src/domains/coverage-analysis/services/gap-detector.ts",
        "src/domains/coverage-analysis/services/risk-scorer.ts"
      ],
      "recommendations": [
        "HIGH: Gap detector and risk scorer lack tests despite being core services",
        "Add tests for gap-detector.ts - risk-based gap prioritization",
        "Add tests for risk-scorer.ts - multi-factor risk analysis",
        "Add tests for coverage-analyzer.ts - main analysis orchestration"
      ]
    },
    "security-compliance": {
      "totalFiles": 6,
      "testedFiles": 3,
      "coverage": 50.0,
      "riskScore": 0.72,
      "priority": "high",
      "untestedFiles": [
        "src/domains/security-compliance/plugin.ts",
        "src/domains/security-compliance/services/semgrep-integration.ts",
        "src/domains/security-compliance/coordinator.ts"
      ],
      "recommendations": [
        "HIGH: Security scanning integration needs test coverage",
        "Add tests for semgrep-integration.ts - external SAST tool integration"
      ]
    },
    "visual-accessibility": {
      "totalFiles": 6,
      "testedFiles": 3,
      "coverage": 50.0,
      "riskScore": 0.68,
      "priority": "high",
      "untestedFiles": [
        "src/domains/visual-accessibility/plugin.ts",
        "src/domains/visual-accessibility/services/axe-core-audit.ts",
        "src/domains/visual-accessibility/coordinator.ts"
      ],
      "recommendations": [
        "Add tests for axe-core-audit.ts - accessibility compliance testing"
      ]
    },
    "contract-testing": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.52,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/contract-testing/plugin.ts",
        "src/domains/contract-testing/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests for integration verification"
      ]
    },
    "quality-assessment": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.48,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/quality-assessment/plugin.ts",
        "src/domains/quality-assessment/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests"
      ]
    },
    "chaos-resilience": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.45,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/chaos-resilience/plugin.ts",
        "src/domains/chaos-resilience/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests"
      ]
    },
    "code-intelligence": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.42,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/code-intelligence/plugin.ts",
        "src/domains/code-intelligence/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests"
      ]
    },
    "requirements-validation": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.40,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/requirements-validation/plugin.ts",
        "src/domains/requirements-validation/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests"
      ]
    },
    "defect-intelligence": {
      "totalFiles": 5,
      "testedFiles": 3,
      "coverage": 60.0,
      "riskScore": 0.38,
      "priority": "medium",
      "untestedFiles": [
        "src/domains/defect-intelligence/plugin.ts",
        "src/domains/defect-intelligence/coordinator.ts"
      ],
      "recommendations": [
        "Add coordinator and plugin tests"
      ]
    },
    "learning-optimization": {
      "totalFiles": 6,
      "testedFiles": 5,
      "coverage": 83.3,
      "riskScore": 0.22,
      "priority": "low",
      "untestedFiles": [
        "src/domains/learning-optimization/plugin.ts"
      ],
      "recommendations": [
        "Good coverage - consider adding plugin test"
      ]
    }
  },
  "moduleCoverage": {
    "compatibility": {
      "totalFiles": 4,
      "testedFiles": 0,
      "coverage": 0.0,
      "riskScore": 0.95,
      "priority": "critical",
      "untestedFiles": [
        "src/compatibility/cli-adapter.ts",
        "src/compatibility/mcp-adapter.ts",
        "src/compatibility/agent-mapper.ts",
        "src/compatibility/config-migrator.ts"
      ],
      "recommendations": [
        "CRITICAL: Entire compatibility module untested",
        "V2-V3 migration depends on these adapters",
        "Add tests for all adapter files immediately"
      ]
    },
    "kernel": {
      "totalFiles": 8,
      "testedFiles": 2,
      "coverage": 25.0,
      "riskScore": 0.88,
      "priority": "critical",
      "untestedFiles": [
        "src/kernel/memory-backend.ts",
        "src/kernel/hybrid-backend.ts",
        "src/kernel/memory-factory.ts",
        "src/kernel/agentdb-backend.ts",
        "src/kernel/plugin-loader.ts",
        "src/kernel/kernel.ts"
      ],
      "recommendations": [
        "CRITICAL: Core kernel components lack unit tests",
        "Add tests for memory backends - foundation of data persistence",
        "Add tests for kernel.ts - system initialization"
      ]
    },
    "learning": {
      "totalFiles": 8,
      "testedFiles": 2,
      "coverage": 25.0,
      "riskScore": 0.75,
      "priority": "high",
      "untestedFiles": [
        "src/learning/sqlite-persistence.ts",
        "src/learning/pattern-store.ts",
        "src/learning/qe-hooks.ts",
        "src/learning/qe-guidance.ts",
        "src/learning/real-embeddings.ts",
        "src/learning/qe-patterns.ts"
      ],
      "recommendations": [
        "HIGH: Learning system components need tests",
        "Add tests for pattern-store.ts - pattern learning storage",
        "Add tests for qe-hooks.ts - QE integration hooks"
      ]
    },
    "shared": {
      "totalFiles": 21,
      "testedFiles": 9,
      "coverage": 42.9,
      "riskScore": 0.62,
      "priority": "high",
      "untestedFiles": [
        "src/shared/metrics/code-metrics.ts",
        "src/shared/metrics/system-metrics.ts",
        "src/shared/llm/providers/ollama.ts",
        "src/shared/llm/providers/openai.ts",
        "src/shared/llm/providers/claude.ts",
        "src/shared/embeddings/embedding-cache.ts",
        "src/shared/embeddings/ollama-client.ts",
        "src/shared/security/osv-client.ts",
        "src/shared/security/compliance-patterns.ts",
        "src/shared/events/domain-events.ts",
        "src/shared/git/git-analyzer.ts",
        "src/shared/entities/base-entity.ts"
      ],
      "recommendations": [
        "Add tests for LLM provider implementations",
        "Add tests for embedding cache and clients",
        "Add tests for security compliance patterns"
      ]
    },
    "mcp": {
      "totalFiles": 27,
      "testedFiles": 12,
      "coverage": 44.4,
      "riskScore": 0.58,
      "priority": "high",
      "untestedFiles": [
        "src/mcp/tools/test-execution/execute.ts",
        "src/mcp/tools/contract-testing/validate.ts",
        "src/mcp/tools/quality-assessment/evaluate.ts",
        "src/mcp/tools/chaos-resilience/inject.ts",
        "src/mcp/tools/test-generation/generate.ts",
        "src/mcp/tools/requirements-validation/validate.ts",
        "src/mcp/transport/stdio.ts",
        "src/mcp/protocol-server.ts",
        "src/mcp/tool-registry.ts",
        "src/mcp/entry.ts",
        "src/mcp/handlers/agent-handlers.ts",
        "src/mcp/handlers/task-handlers.ts",
        "src/mcp/handlers/core-handlers.ts",
        "src/mcp/handlers/memory-handlers.ts",
        "src/mcp/handlers/domain-handlers.ts"
      ],
      "recommendations": [
        "Add tests for MCP tool implementations",
        "Add tests for request handlers",
        "Add tests for transport layer"
      ]
    },
    "workers": {
      "totalFiles": 13,
      "testedFiles": 6,
      "coverage": 46.2,
      "riskScore": 0.55,
      "priority": "medium",
      "untestedFiles": [
        "src/workers/workers/test-health.ts",
        "src/workers/workers/flaky-detector.ts",
        "src/workers/workers/performance-baseline.ts",
        "src/workers/workers/coverage-tracker.ts",
        "src/workers/workers/regression-monitor.ts",
        "src/workers/workers/compliance-checker.ts",
        "src/workers/workers/learning-consolidation.ts"
      ],
      "recommendations": [
        "Add tests for background worker implementations"
      ]
    },
    "coordination": {
      "totalFiles": 15,
      "testedFiles": 9,
      "coverage": 60.0,
      "riskScore": 0.42,
      "priority": "medium",
      "untestedFiles": [
        "src/coordination/result-saver.ts",
        "src/coordination/task-executor.ts",
        "src/coordination/protocols/defect-investigation.ts",
        "src/coordination/protocols/morning-sync.ts",
        "src/coordination/protocols/learning-consolidation.ts",
        "src/coordination/claims/claim-repository.ts"
      ],
      "recommendations": [
        "Add tests for coordination protocols"
      ]
    },
    "optimization": {
      "totalFiles": 4,
      "testedFiles": 4,
      "coverage": 100.0,
      "riskScore": 0.10,
      "priority": "low",
      "untestedFiles": [],
      "recommendations": [
        "Excellent coverage - maintain current level"
      ]
    },
    "init": {
      "totalFiles": 3,
      "testedFiles": 3,
      "coverage": 100.0,
      "riskScore": 0.10,
      "priority": "low",
      "untestedFiles": [],
      "recommendations": [
        "Excellent coverage - maintain current level"
      ]
    }
  },
  "priorityMatrix": {
    "critical": {
      "count": 22,
      "files": [
        {"file": "src/compatibility/cli-adapter.ts", "riskScore": 0.95, "reason": "V2-V3 migration dependency"},
        {"file": "src/compatibility/mcp-adapter.ts", "riskScore": 0.95, "reason": "V2-V3 migration dependency"},
        {"file": "src/compatibility/agent-mapper.ts", "riskScore": 0.95, "reason": "V2-V3 migration dependency"},
        {"file": "src/compatibility/config-migrator.ts", "riskScore": 0.95, "reason": "V2-V3 migration dependency"},
        {"file": "src/kernel/memory-backend.ts", "riskScore": 0.88, "reason": "Core data persistence"},
        {"file": "src/kernel/hybrid-backend.ts", "riskScore": 0.88, "reason": "Core data persistence"},
        {"file": "src/kernel/agentdb-backend.ts", "riskScore": 0.88, "reason": "Core data persistence"},
        {"file": "src/kernel/kernel.ts", "riskScore": 0.88, "reason": "System initialization"},
        {"file": "src/domains/test-execution/services/flaky-detector.ts", "riskScore": 0.85, "reason": "Test stability detection"},
        {"file": "src/domains/test-execution/services/retry-handler.ts", "riskScore": 0.85, "reason": "Test retry logic"},
        {"file": "src/domains/test-execution/services/test-executor.ts", "riskScore": 0.85, "reason": "Parallel execution"},
        {"file": "src/domains/test-generation/services/test-generator.ts", "riskScore": 0.82, "reason": "AI test generation"},
        {"file": "src/domains/test-generation/services/pattern-matcher.ts", "riskScore": 0.82, "reason": "Pattern recognition"}
      ],
      "totalRiskScore": 11.61,
      "estimatedEffort": "40-60 hours"
    },
    "high": {
      "count": 28,
      "files": [
        {"file": "src/domains/coverage-analysis/services/gap-detector.ts", "riskScore": 0.78, "reason": "Gap prioritization"},
        {"file": "src/domains/coverage-analysis/services/risk-scorer.ts", "riskScore": 0.78, "reason": "Risk analysis"},
        {"file": "src/domains/coverage-analysis/services/coverage-analyzer.ts", "riskScore": 0.78, "reason": "Analysis orchestration"},
        {"file": "src/learning/sqlite-persistence.ts", "riskScore": 0.75, "reason": "Learning data storage"},
        {"file": "src/learning/pattern-store.ts", "riskScore": 0.75, "reason": "Pattern storage"},
        {"file": "src/domains/security-compliance/services/semgrep-integration.ts", "riskScore": 0.72, "reason": "SAST integration"},
        {"file": "src/domains/visual-accessibility/services/axe-core-audit.ts", "riskScore": 0.68, "reason": "Accessibility testing"},
        {"file": "src/shared/llm/providers/claude.ts", "riskScore": 0.62, "reason": "LLM integration"},
        {"file": "src/shared/llm/providers/openai.ts", "riskScore": 0.62, "reason": "LLM integration"},
        {"file": "src/shared/llm/providers/ollama.ts", "riskScore": 0.62, "reason": "LLM integration"},
        {"file": "src/mcp/handlers/domain-handlers.ts", "riskScore": 0.58, "reason": "MCP request handling"},
        {"file": "src/mcp/handlers/memory-handlers.ts", "riskScore": 0.58, "reason": "MCP request handling"},
        {"file": "src/mcp/handlers/task-handlers.ts", "riskScore": 0.58, "reason": "MCP request handling"}
      ],
      "totalRiskScore": 9.34,
      "estimatedEffort": "60-80 hours"
    },
    "medium": {
      "count": 24,
      "files": [
        {"file": "src/workers/workers/test-health.ts", "riskScore": 0.55, "reason": "Background worker"},
        {"file": "src/workers/workers/flaky-detector.ts", "riskScore": 0.55, "reason": "Background worker"},
        {"file": "src/workers/workers/coverage-tracker.ts", "riskScore": 0.55, "reason": "Background worker"},
        {"file": "src/coordination/protocols/defect-investigation.ts", "riskScore": 0.42, "reason": "Coordination protocol"},
        {"file": "src/coordination/protocols/morning-sync.ts", "riskScore": 0.42, "reason": "Coordination protocol"},
        {"file": "All plugin.ts files", "riskScore": 0.40, "reason": "Domain plugins"}
      ],
      "totalRiskScore": 5.89,
      "estimatedEffort": "30-50 hours"
    },
    "low": {
      "count": 10,
      "files": [
        {"file": "src/benchmarks/performance-benchmarks.ts", "riskScore": 0.20, "reason": "Non-critical utility"},
        {"file": "src/benchmarks/run-benchmarks.ts", "riskScore": 0.20, "reason": "Non-critical utility"}
      ],
      "totalRiskScore": 2.00,
      "estimatedEffort": "10-15 hours"
    }
  },
  "semanticAnalysis": {
    "codePathAnalysis": {
      "highComplexityPaths": [
        {
          "path": "src/domains/test-execution/services",
          "complexity": "high",
          "cyclomaticComplexity": 28,
          "reason": "Multiple branching for parallel execution and retry logic"
        },
        {
          "path": "src/kernel",
          "complexity": "high",
          "cyclomaticComplexity": 24,
          "reason": "Backend abstraction with multiple implementations"
        },
        {
          "path": "src/domains/coverage-analysis/services",
          "complexity": "high",
          "cyclomaticComplexity": 22,
          "reason": "HNSW indexing and risk scoring algorithms"
        }
      ],
      "criticalIntegrationPoints": [
        {
          "point": "Memory Backend Interface",
          "files": ["memory-backend.ts", "hybrid-backend.ts", "agentdb-backend.ts"],
          "risk": "Data persistence layer affects all domains"
        },
        {
          "point": "MCP Protocol Handler",
          "files": ["protocol-server.ts", "handlers/*.ts"],
          "risk": "External API surface for Claude integration"
        },
        {
          "point": "V2 Compatibility Layer",
          "files": ["compatibility/*.ts"],
          "risk": "Migration path from V2 to V3"
        }
      ]
    },
    "patternBasedRecommendations": [
      {
        "pattern": "Plugin Architecture",
        "observation": "12 domain plugins lack direct tests",
        "recommendation": "Create a base plugin test template and apply to all domains",
        "estimatedImpact": "Would cover 12 files with ~2 hours of work using template approach"
      },
      {
        "pattern": "Coordinator Pattern",
        "observation": "8 coordinators tested, 4 need tests",
        "recommendation": "Use existing coordinator tests as templates",
        "estimatedImpact": "4 files, ~4 hours"
      },
      {
        "pattern": "Service Layer",
        "observation": "Core services in test-execution and test-generation domains lack tests",
        "recommendation": "Prioritize test-executor.ts and test-generator.ts as they are central to V3 functionality",
        "estimatedImpact": "Critical for V3 release validation"
      },
      {
        "pattern": "Backend Abstraction",
        "observation": "Multiple backend implementations (memory, hybrid, agentdb) untested",
        "recommendation": "Create interface-conformance tests that validate all backends",
        "estimatedImpact": "Would validate data persistence across all storage mechanisms"
      }
    ]
  },
  "aiInsights": {
    "recommendations": [
      "Focus on uncovered branches in authentication module",
      "Add edge case tests for error handling paths",
      "Consider property-based testing for utility functions",
      "Prioritize compatibility module tests for V3 migration safety",
      "Add integration tests for kernel memory backends"
    ],
    "riskAssessment": "medium",
    "confidence": 0.88,
    "analysisNotes": [
      "HNSW-indexed search provided 5900x improvement over brute-force",
      "Risk scoring considers: change frequency, complexity, defect history",
      "Semantic similarity used to cluster related gaps"
    ]
  },
  "trendAnalysis": {
    "weeklyTrend": {
      "lineCoverage": [78.2, 79.1, 79.8, 80.4, 80.8],
      "direction": "improving",
      "projectedNextWeek": 81.5
    },
    "domainTrends": {
      "improving": ["learning-optimization", "code-intelligence"],
      "stable": ["quality-assessment", "contract-testing", "defect-intelligence"],
      "needsAttention": ["test-execution", "test-generation", "coverage-analysis"]
    }
  },
  "learningOutcome": {
    "agentId": "v3-qe-coverage-specialist",
    "taskType": "coverage-analysis",
    "reward": 0.85,
    "patterns": {
      "successful": [
        "HNSW indexing for O(log n) gap detection",
        "Risk-weighted prioritization matrix",
        "Semantic clustering of related gaps"
      ],
      "riskFactors": [
        "Compatibility module (V2-V3 migration)",
        "Kernel memory backends (data persistence)",
        "Test execution services (core functionality)"
      ]
    },
    "storedAt": "aqe/coverage-analysis/results/2026-01-11T11-37-21"
  }
}
